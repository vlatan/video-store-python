<!DOCTYPE html>
<html>

<head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<!-- Bootstrap CSS -->
	<!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"> -->
	<!-- <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='main.css') }}"> -->
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700;900&display=swap" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='shared.css') }}">
	{% block css %}
	{% endblock css %}

	{% if title %}
	<title>Doxder - {{ title }}</title>
	{% else %}
	<title>Doxder - Homepage</title>
	{% endif %}
</head>

<body>
	<div class="site-wrap">
		<header class="site-header">
			<a class="logo" href="/">Doxder</a>
			<nav class="navbar">
				{% if current_user.is_authenticated %}
				<a class="nav-item" href="{{ url_for('posts.new_post') }}">New Doc</a>
				<a class="nav-item username" href="{{ url_for('users.account') }}">
					{% if current_user.picture == 'default.jpg' %}
					<img src="{{ url_for('static', filename='profile_pics/default.jpg') }}" class="username-image"
						width="20" height="20" alt="">
					{% else %}
					<img src="{{ current_user.picture }}" class="username-image" width="20" height="20" alt="">
					{% endif %}
					{{ current_user.username }}</a>
				<a class="nav-item g_id_signout" href="{{ url_for('users.logout') }}">Sign out</a>
				{% else %}
				<a class="nav-item" href="#" onclick="OAuth()">Sign in</a>
				{% endif %}
			</nav>
		</header>

		<main role="main" class="content-wrap">
			{% with messages = get_flashed_messages(with_categories=true) %}
			{% if messages %}
			{% for category, message in messages %}
			<div class="alert alert-{{ category }}">
				{{ message }}
			</div>
			{% endfor %}
			{% endif %}
			{% endwith %}
			{% block content %}
			{% endblock content %}
		</main>

	</div>

	<!-- Optional JavaScript -->
	<!-- jQuery first, then Popper.js, then Bootstrap JS -->
	<!-- <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script> -->

	<script>
		function OAuth() {
			var url = '{{ url_for("users.oauth") }}';
			var width = screen.availWidth * 0.44;
			var height = screen.availHeight * 0.83;
			var left = (screen.availWidth / 2) - (width / 2);
			var top = (screen.availHeight / 2) - (height / 2);
			window.open(url, '_blank', 'width=' + width + ', height=' + height + ', left=' + left + ', top=' + top + '');
		}
	</script>

	{% if not current_user.is_authenticated %}
	<script src="https://accounts.google.com/gsi/client" async defer></script>
	<div id="g_id_onload" data-client_id="{{ config['GOOGLE_OAUTH_CLIENT_ID'] }}"
		data-login_uri="{{ url_for('users.onetap') }}">
	</div>
	{% endif %}

</body>

</html>